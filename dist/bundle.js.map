{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://zum/./data/ sync ^\\.\\/.*\\.json$","webpack://zum/external commonjs \"express\"","webpack://zum/external node-commonjs \"fs\"","webpack://zum/external node-commonjs \"path\"","webpack://zum/./controllers/article.controller.cjs","webpack://zum/./controllers/best.controller.cjs","webpack://zum/./controllers/category.controller.cjs","webpack://zum/./management/article.management.cjs","webpack://zum/./models/Article.cjs","webpack://zum/./routes/article.routes.cjs","webpack://zum/./routes/base.routes.cjs","webpack://zum/./routes/category.routes.cjs","webpack://zum/webpack/bootstrap","webpack://zum/webpack/runtime/hasOwnProperty shorthand","webpack://zum/./app.js"],"sourcesContent":["var map = {\n\t\"./best.json\": 393,\n\t\"./culture.json\": 915,\n\t\"./favs.json\": 697,\n\t\"./food.json\": 163,\n\t\"./life.json\": 573,\n\t\"./travel.json\": 327\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 320;","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","const { readFile, updateFile } = require('../management/article.management.cjs');\nconst Article = require('../models/Article.cjs');\n\nconst getArticles = (req, res) => {\n  const path = req.path.split('/');\n  const filename = path[path.length - 1];\n  const articles = readFile(filename);\n  res.json(articles);\n}\n\nconst getContent = (req, res) => {\n  const filename = req.params.category;\n  const articles = readFile(filename);\n  res.json(articles);\n}\n\nconst getContentDetails = (req, res) => {\n  const articleId = parseInt(req.params.idx);\n  const filename = req.params.category;\n  const article = readFile(filename).find(article => article.idx === articleId);\n  res.json(article);\n}\n\nconst updateContent = async (req, res) => {\n  const { idx: articleIdx, isFav } = req.body;\n  const article = new Article();\n  \n  let updatedFavList, data, list;\n  const favList = readFile('favs');\n\n  try {\n    data = await article.fetchArticle(articleIdx);\n    list = await article.fetchData(data.category);\n  } catch(error) {\n    return new Error(error);\n  }\n  \n  const updatedArticle = {\n    ...data.article,\n    isFav: isFav\n  }\n\n  const index = list.findIndex(item => item.idx === parseInt(articleIdx));\n  const updatedList = [...list.slice(0, index), updatedArticle, ...list.slice(index + 1)];\n  \n  if(isFav) {\n    if(favList.find(item => item.idx === parseInt(articleIdx))) return;\n    updatedFavList = [...favList, updatedArticle];\n  } else {\n    updatedFavList = favList.filter(item => item.idx !== parseInt(articleIdx));\n  }\n\n  updateFile('favs', updatedFavList);\n  updateFile(data.category, updatedList);\n\n  res.json({\n    message: 'List updated!',\n    updatedList: updatedList\n  });\n}\n\nmodule.exports = {\n  getArticles: getArticles,\n  getContent: getContent,\n  getContentDetails: getContentDetails,\n  updateContent: updateContent\n}","const Article = require('../models/Article.cjs');\n\nconst article = new Article();\n\nconst getHome = async (req, res) => {\n  let bestArticles, data;\n\n  try {\n    bestArticles = await article.fetchData('best');\n    data = await article.fetchAllArticles();\n  } catch(error) {\n    return new Error(error);\n  }\n\n  const { categories, allData: articles } = data;\n\n  const responseData = {\n    pageTitle: 'ZUM',\n    categories: categories,\n    articles: articles,\n    bestArticles : bestArticles\n  }\n\n  return res.render('index', responseData);\n}\n\nmodule.exports = {\n  getHome: getHome\n}","const Article = require('../models/Article.cjs');\n\nconst article = new Article();\n\nconst getCategory = async (req, res) => {\n  const path = req.params.category;\n  let articles;\n\n  try {\n    articles = await article.fetchData(path);\n  } catch (error) {\n    return new Error(error);\n  }\n\n  const pageTitle = path[0].toUpperCase() + path.slice(1);\n\n  const data = {\n    title: pageTitle,\n    category: path,\n    articles: articles\n  }\n\n  return res.render('category', data);\n}\n\nconst getArticle = async (req, res) => {\n  const category = req.params.category;\n  const idx = req.params.idx;\n\n  let data;\n  \n  try {\n    data = await article.fetchArticle(idx);\n  } catch (error) {\n    return new Error(error);\n  }\n\n  return res.render('article', { article: data.article, category: data.category });\n}\n\nmodule.exports = {\n  getCategory: getCategory,\n  getArticle: getArticle\n}","const fs = require('fs');\n\nconst readFile = (filename) => {\n  const data = require(`../data/${filename}.json`);\n  return data;\n}\n\nconst updateFile = (filename, data) => {\n  const changedData = JSON.stringify(data);\n  fs.writeFileSync(`data/${filename}.json`, changedData);\n}\n\nmodule.exports = {\n  readFile: readFile, \n  updateFile: updateFile\n}","class Article {  \n  constructor() {\n    this.categories = ['life', 'travel', 'food', 'culture']\n  }\n\n  async fetchData (filename) {\n    let path;\n    \n    if(filename === 'best') {\n      path = `http://localhost:3000/best`;\n    } else {\n      path = `http://localhost:3000/content/${filename}`;\n    }\n  \n    try {\n      const data = await fetch(path);\n      const response = await data.json();\n      return response;\n    } catch(error) {\n      console.log('Not being able to fetch the data');\n    }\n  }\n  \n  async fetchAllArticles () {\n    let allData = [];\n    let categoryData;\n\n    try {\n      categoryData = await Promise.all(this.categories.map(async (category) => {\n        const data = await this.fetchData(category);\n        return data.slice(0, 3);\n      }));\n    } catch (error) {\n      return new Error(error);\n    }\n\n    for(const data of categoryData) {\n      allData = [...allData, ...data];\n    }\n    \n    return { categories: this.categories, allData };\n  }\n\n  async fetchArticle(idx) {\n    try {\n      const result = await Promise.all(this.categories.map(async (category) => {\n      const data = await this.fetchData(category);\n      const articleList = data.filter(item => item.idx === parseInt(idx));\n      const [article] = articleList;\n      if(articleList.length > 0) return { category, article };\n      }))\n\n      return result.find(element => element);\n    } catch (error) {\n      return new Error(error);\n    }\n  }\n}\n\nmodule.exports = Article;\n","const express = require('express');\n\nconst articleController = require('../controllers/article.controller.cjs');\n\nconst router = express.Router();\n\nrouter.get('/best', articleController.getArticles);\nrouter.get('/content/:category', articleController.getContent);\nrouter.get('/content/:category/:idx', articleController.getContentDetails);\nrouter.patch('/content/category', articleController.updateContent);\n\nmodule.exports = router;\n\n","const express = require('express');\n\nconst bestController = require('../controllers/best.controller.cjs');\n\nconst router = express.Router();\n\nrouter.get('/', bestController.getHome);\n\nmodule.exports = router;\n","const express = require('express');\n\nconst categoryController = require('../controllers/category.controller.cjs');\n\nconst router = express.Router();\n\nrouter.get('/:category', categoryController.getCategory);\nrouter.get('/:category/:idx', categoryController.getArticle);\n\nmodule.exports = router;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const path = require('path');\nconst express = require('express');\n\nconst baseRoutes = require('./routes/base.routes.cjs');\nconst articleRoutes = require('./routes/article.routes.cjs');\nconst categoryRoutes = require('./routes/category.routes.cjs');\n\nconst app = express();\n\napp.set('view engine', 'ejs');\napp.set('views', path.join(__dirname, 'views'));\n\napp.use(express.json());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use(articleRoutes);\napp.use(baseRoutes);\napp.use(categoryRoutes);\n\n// app.use((error, req, res, next) => {\n//   res.status(500).render('500');\n// });\n\napp.listen(3000);"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","require","readFile","updateFile","Article","getArticles","res","path","split","filename","length","articles","json","getContent","params","category","getContentDetails","articleId","parseInt","idx","article","find","updateContent","async","articleIdx","isFav","body","updatedFavList","data","list","favList","fetchArticle","fetchData","error","updatedArticle","index","findIndex","item","updatedList","slice","filter","message","getHome","bestArticles","fetchAllArticles","categories","allData","responseData","pageTitle","render","getCategory","title","toUpperCase","getArticle","fs","changedData","JSON","stringify","writeFileSync","constructor","this","fetch","console","log","categoryData","Promise","all","articleList","element","express","articleController","router","Router","get","patch","bestController","categoryController","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","obj","prop","prototype","hasOwnProperty","call","baseRoutes","articleRoutes","categoryRoutes","app","set","join","__dirname","use","static","listen"],"sourceRoot":""}